const texto = document.getElementById('texto');
const opcoes = document.getElementById('opcoes');

const cenas = {
  inicio: {
    texto: "VocÃª acorda em uma floresta misteriosa. Ã€ sua frente hÃ¡ dois caminhos: uma trilha iluminada e uma caverna escura.",
    opcoes: [
      { t: "Seguir pela trilha iluminada", d: "luz" },
      { t: "Entrar na caverna escura", d: "caverna" }
    ]
  },
  luz: {
    texto: "A trilha leva atÃ© um lago brilhante onde uma criatura curiosa surge. Ela parece amigÃ¡vel.",
    opcoes: [
      { t: "Conversar com a criatura", d: "amizade" },
      { t: "Ignorar e continuar", d: "ilha" },
      { t: "Voltar para o inÃ­cio", d: "inicio" }
    ]
  },
  caverna: {
    texto: "Dentro da caverna vocÃª encontra inscriÃ§Ãµes antigas e ouve passos ao longe.",
    opcoes: [
      { t: "Ler as inscriÃ§Ãµes", d: "escrita" },
      { t: "Investigar os passos", d: "monstro" },
      { t: "Sair correndo", d: "inicio" }
    ]
  },
  amizade: {
    texto: "A criatura se torna sua amiga e guia vocÃª por um portal seguro para fora da floresta. VocÃª venceu! ðŸŒŸ",
    opcoes: []
  },
  ilha: {
    texto: "VocÃª encontra uma pequena ilha no meio do lago com um baÃº. Dentro hÃ¡ um mapa do tesouro. Fim â€” nova aventura comeÃ§a! ðŸ—ºï¸",
    opcoes: []
  },
  escrita: {
    texto: "As inscriÃ§Ãµes revelam uma senha. VocÃª a memoriza e descobre um tesouro escondido: conhecimento. Fim ðŸ“š",
    opcoes: []
  },
  monstro: {
    texto: "Um monstro aparece! VocÃª foge e aprende a importÃ¢ncia de se preparar antes de explorar. Fim ðŸ˜…",
    opcoes: []
  }
};

function limparOpcoes(){
  opcoes.innerHTML = '';
}

function criarBotao(textoBtn, destino){
  const btn = document.createElement('button');
  btn.className = 'opcao';
  btn.innerText = textoBtn;
  btn.addEventListener('click', () => mostrarCena(destino));
  return btn;
}

function mostrarCena(nome){
  const cena = cenas[nome];
  texto.innerText = cena.texto;
  limparOpcoes();

  if(!cena.opcoes || cena.opcoes.length === 0){
    const reiniciar = crearReiniciar();
    opcoes.appendChild(reiniciar);
    return;
  }

  cena.opcoes.forEach(o => {
    const b = criarBotao(o.t, o.d);
    opcoes.appendChild(b);
  });
}

function crearReiniciar(){
  const btn = document.createElement('button');
  btn.className = 'opcao';
  btn.innerText = 'Reiniciar aventura';
  btn.addEventListener('click', () => mostrarCena('inicio'));
  return btn;
}

mostrarCena('inicio');
